string result = $@"
//////////////////////////////////////////////////////////////////////
// TASKS
//////////////////////////////////////////////////////////////////////

Task(""Clean"")
    .Description(""Cleans output folder"")
    .Does(() =>
    {{
        CleanDirectories(outputDir);
    }});
";

result += GenerateParts(ScriptTaskPart.BODY);

result += $@"
//////////////////////////////////////////////////////////////////////
// TASK TARGETS
//////////////////////////////////////////////////////////////////////

Task(""Default"")
    .IsDependentOn(""Clean"")
";

foreach (var dependency in GetDependencyList())
{
    result += string.Format("    .IsDependentOn(\"{0}\")", dependency);
}

result += $@";

//////////////////////////////////////////////////////////////////////
// EXECUTION
//////////////////////////////////////////////////////////////////////

RunTarget(target);
";

result